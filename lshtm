#!/bin/bash
echo "<html><head>ls-output</head><body>"
echo "<br>"
for FILE in `ls`
	do
	  echo "<br><a href=\"$FILE\" >" $FILE "</a>" 
	  case $FILE in
		*.pdf)
		  pdfdraw -t $FILE 1 |grep JSTOR &&\
		   pdfdraw -t $FILE 2 |head|\
		   grep -v '\[Page' |sed -e 's/^/<br>/g'||\
		   pdfdraw -t $FILE 1| head |\
		   grep -v '\[Page' |sed -e 's/^/<br>/g'
		;;
	  	*.rtf|*.doc)
		  catdoc $FILE|grep ..|head|sed -e 's/^/<br>/g'
		;;
		*.txt|*.l*st|*.sh|*.py)
		  head $FILE | sed -e 's/^/<br>/g'
		  ;;
		*)
		echo "<br>" `file $FILE` "<br>"
		;;
	esac
done

echo "<br> Autogenerated by lshtm "
echo "</body></html>"
